!function(){"use strict";angular.module("zl.ui.toggle",[]).value("$zlToggleSuppressError",!1).constant("zlToggleConfig",{on:"On",off:"Off",size:"",onstyle:"btn-primary",offstyle:"btn-default",styleToogle:"",disable:!1}).controller("zlToggleController",["$scope","$attrs","$interpolate","$log","zlToggleConfig","$zlToggleSuppressError",function(e,l,t,s,n,o){var a=this,i={$setViewValue:angular.noop};angular.forEach(["on","off","size","onstyle","offstyle","styleToogle","disable"],function(s,o){a[s]=angular.isDefined(l[s])?o<7?t(l[s])(e.$parent):e.$parent.$eval(l[s]):n[s]}),this.init=function(t){i=t,a.computeStyle(),i.$render=function(){a.zlToggle()},i.$viewChangeListeners.push(function(){e.$eval(l.ngChange)})},this.computeStyle=function(){a.disable="true"==a.disable;var l=a.element.find("label");angular.element(l[0]).html(a.on),angular.element(l[1]).html(a.off);var t=a.element.find("span"),s=a.width||Math.max(l[0].offsetWidth,l[1].offsetWidth)+t[0].offsetWidth/2,n=a.height||Math.max(l[0].offsetHeight,l[1].offsetHeight),o=a.element.find("div"),i=o[0].offsetWidth,r=o[1].offsetHeight;e.wrapperStyle={},i<s?e.wrapperStyle.width=s+"px":e.wrapperStyle.width=i+"px",r<n&&"btn-xs"!==a.size&&"btn-sm"!==a.size?e.wrapperStyle.height=n+"px":e.wrapperStyle.height=r+"px","btn-block"===a.size?(e.wrapperStyle.width="100%",e.onClass=[a.onstyle,"toggle-on",a.disable?"disabled":""],e.offClass=[a.offstyle,"toggle-off",a.disable?"disabled":""],e.handleClass=["toggle-handle",a.disable?"disabled":""]):(e.onClass=[a.onstyle,a.size,"toggle-on",a.disable?"disabled":""],e.offClass=[a.offstyle,a.size,"toggle-off",a.disable?"disabled":""],e.handleClass=[a.size,"toggle-handle",a.disable?"disabled":""])},this.zlToggle=function(){angular.isDefined(i.$viewValue)?this.isOn=i.$viewValue:this.isOn=!1,this.isOn?e.wrapperClass=[a.onstyle,a.size,a.styleToogle,a.disable?"disabled":""]:e.wrapperClass=[a.offstyle,"off ",a.size,a.styleToogle,a.disable?"disabled":""]},e.onSwitch=function(e){a.disable||(i.$setViewValue(!i.$viewValue),i.$render())},angular.forEach(["ngModel"],function(t){var s=e.$parent.$watch(l[t],function(e){i.$render()});e.$parent.$on("$destroy",function(){s()})}),angular.forEach(["on","off","size","onstyle","offstyle","styleToogle","disable"],function(e){l.$observe(e,function(l){a[e]!==l&&(a[e]=l,a.computeStyle())})})}]).directive("zlToggle",function(){return{restrict:"E",transclude:!0,template:'<div class="toggle btn" ng-class="wrapperClass" ng-style="wrapperStyle" ng-click="onSwitch()"><div class="toggle-group"><label class="btn" ng-class="onClass"></label><label class="btn active" ng-class="offClass"></label><span class="btn btn-default" ng-class="handleClass"></span></div></div>',scope:{bindModel:"=ngModel"},require:["zlToggle","ngModel"],controller:"zlToggleController",controllerAs:"zlToggle",compile:function(e,l,t){return{pre:function(e,l,t,s){var n=s[0],o=s[1];n.element=l,n.init(o)},post:function(){}}}}})}();